/* ============================================
   FIXES.CSS - Correções finais do Pitch Elo
   
   ESTRUTURA BASE:
   - .slide: grid com 3 rows (52px header, 1fr content, 44px footer)
   - .slide-content: flex column, justify-content: center, height: 100%
   - Padding lateral: var(--slide-padding)
   
   PROBLEMA PRINCIPAL:
   - Filhos com height: 100% ou flex: 1 ocupam todo o espaço
   - Isso anula o justify-content: center do pai
   
   SOLUÇÃO:
   - Remover height: 100% dos containers internos
   - Usar height: auto para permitir centralização
   ============================================ */


/* ============================================
   SLIDE 6: Problem Split V2
   Problema: Conteúdo não centralizado verticalmente
   Causa: .problem-split-v2 tinha height: 100%
   ============================================ */

.problem-split-v2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-4);
  width: 100%;
  height: auto !important;  /* Sobrescreve height: 100% do layouts.css */
}

.problem-split-v2__side {
  display: flex;
  flex-direction: column;
  background: var(--color-white);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border);
  overflow: hidden;
  height: auto !important;  /* Permite altura natural */
}

.problem-split-v2__header {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-3);
  border-bottom: 1px solid var(--color-border);
}

.problem-split-v2__icon {
  font-size: 24px;
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-md);
  flex-shrink: 0;
}

.problem-split-v2__side--provider .problem-split-v2__icon {
  background: rgba(56, 161, 105, 0.1);
}

.problem-split-v2__side--client .problem-split-v2__icon {
  background: rgba(66, 153, 225, 0.1);
}

.problem-split-v2__title {
  font-family: var(--font-display);
  font-size: var(--font-size-base);
  font-weight: 600;
  color: var(--color-charcoal);
}

.problem-split-v2__stats {
  display: flex;
  gap: var(--space-3);
  padding: var(--space-2) var(--space-3);
  background: var(--color-gray-50);
  border-bottom: 1px solid var(--color-border);
}

.problem-split-v2__stat-value {
  font-family: var(--font-display);
  font-size: 22px;
  font-weight: 700;
  line-height: 1;
}

.problem-split-v2__side--provider .problem-split-v2__stat-value {
  color: #38A169;
}

.problem-split-v2__side--client .problem-split-v2__stat-value {
  color: #4299E1;
}

.problem-split-v2__stat-label {
  font-size: 10px;
  color: var(--color-gray-500);
  margin-top: 2px;
}

.problem-split-v2__content {
  padding: var(--space-3);
  flex: 0 0 auto !important;  /* Sobrescreve flex: 1 do layouts.css */
}

.problem-split-v2__item {
  font-size: 12px;
  color: var(--color-gray-700);
  line-height: 1.4;
  margin-bottom: var(--space-1);
}

.problem-split-v2__item::before {
  content: '→ ';
  color: var(--color-gray-400);
}

.problem-split-v2__side--provider .problem-split-v2__header {
  border-top: 3px solid #38A169;
}

.problem-split-v2__side--client .problem-split-v2__header {
  border-top: 3px solid #4299E1;
}


/* ============================================
   SLIDE 7: Data Highlight
   Problema: Conteúdo muito grande, corta o rodapé
   Causa: Fontes muito grandes, gaps muito grandes
   ============================================ */

.data-highlight {
  gap: var(--space-2) !important;
}

.data-highlight__metrics {
  gap: var(--space-3) !important;
  flex-wrap: wrap;
}

.data-highlight__metric--primary .data-highlight__number {
  font-size: 56px !important;
}

.data-highlight__metric:not(.data-highlight__metric--primary) .data-highlight__number {
  font-size: 28px !important;
}

.data-highlight__label {
  font-size: 12px !important;
}

.data-highlight__context {
  font-size: 10px !important;
}

.data-highlight__insight {
  padding: var(--space-2) var(--space-3) !important;
  max-width: 560px !important;
}

.data-highlight__insight p {
  font-size: 13px !important;
  line-height: 1.4 !important;
}

.data-highlight__source {
  font-size: 9px !important;
}


/* ============================================
   SLIDE 10: Solution Hero
   Requisito: Adicionar cor verde da identidade visual
   ============================================ */

.solution-hero__header {
  position: relative;
  padding-bottom: var(--space-3);
  margin-bottom: var(--space-3);
}

.solution-hero__header::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100px;
  height: 3px;
  background: linear-gradient(90deg, #38A169 0%, #68D391 100%);
  border-radius: 2px;
}

.solution-hero__sections {
  background: linear-gradient(135deg, rgba(56, 161, 105, 0.04) 0%, rgba(104, 211, 145, 0.02) 100%);
  border-radius: var(--radius-md);
  padding: var(--space-3);
  border: 1px solid rgba(56, 161, 105, 0.1);
}


/* ============================================
   SLIDE 11: Dual Track
   Requisito: Título centralizado
   ============================================ */

.slide-content--dual-track h2 {
  text-align: center !important;
  max-width: 100% !important;
  width: 100%;
}


/* ============================================
   SLIDE 13: Cards 3 (Propósito)
   Problema: Espaço excessivo entre subtítulo e cards
   Causa: margin-bottom: auto no subtítulo + height: 100%
   Solução: Remover auto, usar justify-content: center
   ============================================ */

.slide-content--cards3-bottom {
  justify-content: center !important;  /* Centraliza todo o conteúdo verticalmente */
  gap: var(--space-3) !important;
  height: 100%;
}

.slide-content--cards3-bottom .cards3-subtitle {
  margin-bottom: var(--space-4) !important;  /* Pequeno espaço antes dos cards */
  max-width: 75%;
}

.slide-content--cards3-bottom .pillars-editorial {
  align-items: stretch !important;
  margin-top: 0 !important;  /* Remove margin-top: auto */
  gap: var(--space-4);
}

.slide-content--cards3-bottom .pillars-editorial .pillar {
  margin-top: 0 !important;
  display: flex;
  flex-direction: column;
}

.slide-content--cards3-bottom .pillars-editorial .pillar:nth-child(2),
.slide-content--cards3-bottom .pillars-editorial .pillar:nth-child(3) {
  margin-top: 0 !important;
}


/* ============================================
   SLIDE 15: Revenue Model
   Problema: Título não centralizado
   Causa: h2 está dentro de .rm-header
   ============================================ */

.slide-content--rm-expanded {
  align-items: center !important;
}

.rm-header {
  text-align: center !important;
  width: 100%;
}

.rm-header h2 {
  max-width: 100% !important;
}

.rm-streams-expanded {
  width: 100%;
}


/* ============================================
   SLIDE 19: User Stories V2
   Problema: Conteúdo não centralizado verticalmente
   ============================================ */

.slide-content--user-stories-v2 {
  justify-content: center !important;
}

.slide-content--user-stories-v2 h2 {
  text-align: center !important;
  max-width: 100% !important;
  width: 100%;
}

.us-columns {
  /* Garantir que não expande para ocupar toda a altura */
  flex: 0 0 auto !important;
}


/* ============================================
   SLIDE 20: Question com background fullscreen
   Problema: Imagem limitada pelas margens do grid
   Causa: .slide-content está dentro do grid com padding
   Solução: Position absolute para cobrir todo o slide
   ============================================ */

.slide-content--question.question--has-bg {
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
  z-index: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

.question--has-bg .question__overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    135deg,
    rgba(45, 55, 72, 0.85) 0%,
    rgba(26, 32, 44, 0.75) 100%
  );
  z-index: 1;
}

.question--has-bg .question__content {
  position: relative;
  z-index: 2;
  padding: var(--space-6);
  max-width: 800px;
  text-align: center;
}

/* Esconder header e footer quando tiver background fullscreen */
.slide:has(.question--has-bg) .slide-header,
.slide:has(.question--has-bg) .slide-footer {
  position: relative;
  z-index: 2;
}


/* ============================================
   SLIDE 20: Prototype Showcase
   Layout: QR Code à esquerda + 3 screenshots à direita
   ============================================ */

.slide-content--prototype {
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.proto-layout {
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: var(--space-6);
  width: 100%;
  align-items: center;
}

.proto-qr {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.proto-qr h2 {
  font-size: var(--font-size-h3);
  margin-bottom: var(--space-2);
}

.proto-subtitle {
  font-size: var(--font-size-small);
  color: var(--color-gray-500);
  margin-bottom: var(--space-4);
}

.proto-qr__placeholder {
  width: 180px;
  height: 180px;
  background: var(--color-gray-100);
  border: 2px dashed var(--color-gray-300);
  border-radius: var(--radius-lg);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  margin-bottom: var(--space-3);
}

.proto-qr__icon {
  font-size: 48px;
}

.proto-qr__text {
  font-weight: 600;
  color: var(--color-gray-600);
}

.proto-qr__hint {
  font-size: 11px;
  color: var(--color-gray-400);
}

.proto-url {
  font-family: var(--font-mono);
  font-size: 12px;
  color: var(--color-gray-500);
  background: var(--color-gray-100);
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-md);
}

.proto-screens {
  display: flex;
  gap: var(--space-4);
  justify-content: center;
}

.proto-screen {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-2);
}

.proto-screen__frame {
  width: 140px;
  height: 280px;
  background: var(--color-gray-900);
  border-radius: 20px;
  padding: 8px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
}

.proto-screen__img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 12px;
  background: var(--color-white);
}

.proto-screen__info {
  text-align: center;
}

.proto-screen__label {
  display: block;
  font-weight: 600;
  font-size: 13px;
  color: var(--color-charcoal);
}

.proto-screen__desc {
  display: block;
  font-size: 11px;
  color: var(--color-gray-500);
}


/* ============================================
   PRINT STYLES
   Garante que header e footer apareçam em PDF
   ============================================ */

@media print {
  @page {
    size: landscape;
    margin: 0;
  }
  
  html, body {
    margin: 0 !important;
    padding: 0 !important;
    width: 100% !important;
    height: 100% !important;
  }
  
  .presentation {
    width: 100% !important;
    max-width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
  }
  
  .slide {
    page-break-after: always;
    page-break-inside: avoid;
    break-after: page;
    break-inside: avoid;
    width: 100vw !important;
    height: 100vh !important;
    max-width: 100vw !important;
    max-height: 100vh !important;
    margin: 0 !important;
    padding: 0 60px !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    overflow: visible !important;  /* ALTERADO: visible para não cortar número */
    box-sizing: border-box !important;
  }
  
  /* Section covers - overflow visible para mostrar o número grande */
  .slide--section-cover {
    overflow: visible !important;
    background: var(--color-gray-900) !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  /* Número de seção - garantir visibilidade */
  .section-number-bg {
    color: rgba(255, 255, 255, 0.12) !important;  /* Mais visível no print */
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    overflow: visible !important;
    position: absolute !important;
    right: -20px !important;  /* Ajustar posição */
    bottom: -80px !important;  /* Posicionar mais abaixo */
    top: auto !important;
    transform: none !important;
  }
  
  .slide-header,
  .slide-footer {
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
    margin-left: -60px !important;
    margin-right: -60px !important;
    padding: var(--space-1) 60px !important;
    flex-shrink: 0 !important;
  }
  
  .slide-header {
    position: relative;
  }
  
  .slide-footer {
    position: relative;
  }
  
  .breadcrumb a,
  .nav-links a {
    text-decoration: none;
    color: var(--color-gray-500);
  }
  
  /* Remove animações e transições para PDF */
  * {
    animation: none !important;
    transition: none !important;
  }
}


/* ============================================
   SLIDE 1: Capa - Título estilo App + Logo maior
   ============================================ */

.slide--cover h1 {
  font-family: var(--font-display);
  font-size: 140px !important;
  font-weight: 700 !important;
  letter-spacing: -0.03em;
  color: #38A169 !important;  /* Verde da identidade Elo */
  line-height: 1 !important;
}

.slide--cover .subtitle {
  font-family: var(--font-display) !important;
  font-size: 24px !important;
  font-weight: 400 !important;
  text-transform: none !important;
  letter-spacing: 0 !important;
  color: var(--color-gray-600) !important;
  margin-top: var(--space-4) !important;
}

.slide--cover .cover-logo {
  width: 140px !important;
  height: auto !important;
  margin-bottom: var(--space-5);
}


/* ============================================
   SLIDES 2, 3, 4: Títulos com peso semibold
   (mesmo estilo do slide 13)
   ============================================ */

.slide-content--text-image h2 {
  font-weight: 600 !important;
}


/* ============================================
   SLIDE 20: Prototype Showcase - Frames maiores
   ============================================ */

.proto-layout {
  grid-template-columns: 280px 1fr !important;
  gap: var(--space-6) !important;
  align-items: start !important;
}

.proto-screens {
  display: flex !important;
  gap: var(--space-5) !important;
  justify-content: center !important;
}

.proto-screen {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-3);
}

.proto-screen__frame {
  width: 200px !important;
  height: 420px !important;
  background: var(--color-gray-900) !important;
  border-radius: 28px !important;
  padding: 8px !important;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2) !important;
  overflow: hidden !important;
}

.proto-screen__img {
  width: 100% !important;
  height: 100% !important;
  object-fit: contain !important;
  object-position: top !important;
  border-radius: 20px !important;
  background: var(--color-white) !important;
}

.proto-screen__placeholder {
  width: 100%;
  height: 100%;
  border-radius: 20px;
  background: var(--color-white);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-gray-400);
  font-size: 48px;
}

.proto-screen__label {
  font-size: 15px !important;
  font-weight: 600 !important;
  color: var(--color-gray-900) !important;
}

.proto-screen__desc {
  font-size: 13px !important;
  color: var(--color-gray-500) !important;
}

/* QR Code real */
.proto-qr__image {
  width: 180px;
  height: 180px;
  border-radius: var(--radius-lg);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.proto-url {
  font-family: var(--font-mono) !important;
  font-size: 12px !important;
  color: var(--color-gray-500) !important;
  margin-top: var(--space-2) !important;
}


/* ============================================
   PRINT FIXES ADICIONAIS - Problemas específicos
   ============================================ */

@media print {
  
  /* ----------------------------------------
     FIX 3: Slides com background (8 e 21)
     Background-image não renderiza no print
     ---------------------------------------- */
  
  .question--has-bg {
    background: #2D3748 !important;  /* Cor sólida de fallback */
    background-color: #2D3748 !important;
    background-image: none !important;  /* Remover imagem */
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  .slide-content--question.question--has-bg {
    background: #2D3748 !important;
    background-image: none !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  .question__overlay {
    background: transparent !important;  /* Remover overlay */
    display: block !important;
  }
  
  .question--has-bg .question__overlay {
    background: transparent !important;
    opacity: 0 !important;
  }
  
  .question__content {
    position: relative !important;
    z-index: 2 !important;
  }
  
  .question--has-bg .question__content {
    color: white !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  .question--has-bg .question__text {
    color: white !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  .question--has-bg .question__text strong {
    color: #68D391 !important;  /* Verde para destaque */
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  .question--has-bg .question__context {
    color: rgba(255, 255, 255, 0.7) !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  
  /* ----------------------------------------
     FIX 4: Garantir cores no print
     ---------------------------------------- */
  
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  /* Cards e elementos com background */
  .problem-split-v2__side,
  .sh-card,
  .us-card-v2,
  .rm-stream-expanded,
  .pillar,
  .data-highlight__insight {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  /* Bordas coloridas */
  .problem-split-v2__side--provider .problem-split-v2__header,
  .problem-split-v2__side--client .problem-split-v2__header,
  .pillar--green,
  .pillar--blue,
  .pillar--purple,
  .us-column--green .us-column__header,
  .us-column--blue .us-column__header {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  
  /* ----------------------------------------
     FIX 5: Capa (slides 1 e 22)
     ---------------------------------------- */
  
  .slide--cover .slide-content--cover {
    padding: 0 !important;
    justify-content: center !important;
    align-items: center !important;
  }
  
  .slide--cover h1 {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  
  /* ----------------------------------------
     FIX 6: Dual Track (slide 11)
     Números centrais
     ---------------------------------------- */
  
  .dt-num {
    background: var(--color-gray-100) !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  .dt-row--connect .dt-cell--center {
    background: rgba(56, 161, 105, 0.1) !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  .dt-row--loop .dt-cell--center {
    background: rgba(66, 153, 225, 0.1) !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  
  /* ----------------------------------------
     FIX 7: Personas (slides 17 e 18)
     Trait sliders
     ---------------------------------------- */
  
  .persona-trait__track {
    background: var(--color-gray-200) !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  .persona-trait__fill {
    background: var(--color-charcoal) !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  .persona-trait__marker {
    background: var(--color-charcoal) !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  .persona__photo img {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
}
